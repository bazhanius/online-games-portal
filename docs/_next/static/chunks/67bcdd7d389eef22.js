(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77141,e=>{"use strict";var t=e.i(66343);function r(e){return t.Children.toArray(e).filter(e=>t.isValidElement(e))}e.s(["default",()=>r])},73225,15106,47631,6722,e=>{"use strict";e.i(30608);var t=e.i(66343),r=e.i(29238),a=e.i(34940),o=e.i(77141),i=e.i(96943),n=e.i(57752),l=e.i(84884),s=e.i(40189),d=e.i(90243),u=e.i(97990),c=e.i(20500);function f(e){return(0,c.default)("MuiButtonGroup",e)}let m=(0,u.default)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]);var p=e.i(9955),b=e.i(57718),h=e.i(40223);let g=(0,n.styled)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${m.grouped}`]:t.grouped},{[`& .${m.grouped}`]:t[`grouped${(0,i.default)(r.orientation)}`]},{[`& .${m.grouped}`]:t[`grouped${(0,i.default)(r.variant)}`]},{[`& .${m.grouped}`]:t[`grouped${(0,i.default)(r.variant)}${(0,i.default)(r.orientation)}`]},{[`& .${m.grouped}`]:t[`grouped${(0,i.default)(r.variant)}${(0,i.default)(r.color)}`]},{[`& .${m.firstButton}`]:t.firstButton},{[`& .${m.lastButton}`]:t.lastButton},{[`& .${m.middleButton}`]:t.middleButton},t.root,t[r.variant],!0===r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,"vertical"===r.orientation&&t.vertical]}})((0,l.default)(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2],[`& .${m.grouped}`]:{boxShadow:"none","&:hover":{boxShadow:"none"}}}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter((0,s.default)()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter((0,s.default)(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${m.grouped}`]:{minWidth:40}}))),x=t.forwardRef(function(e,n){let l=(0,d.useDefaultProps)({props:e,name:"MuiButtonGroup"}),{children:s,className:u,color:c="primary",component:m="div",disabled:x=!1,disableElevation:v=!1,disableFocusRipple:y=!1,disableRipple:w=!1,fullWidth:C=!1,orientation:k="horizontal",size:B="medium",variant:$="outlined",...j}=l,S={...l,color:c,component:m,disabled:x,disableElevation:v,disableFocusRipple:y,disableRipple:w,fullWidth:C,orientation:k,size:B,variant:$},R=(e=>{let{classes:t,color:r,disabled:o,disableElevation:n,fullWidth:l,orientation:s,variant:d}=e,u={root:["root",d,s,l&&"fullWidth",n&&"disableElevation",`color${(0,i.default)(r)}`],grouped:["grouped",`grouped${(0,i.default)(s)}`,`grouped${(0,i.default)(d)}`,`grouped${(0,i.default)(d)}${(0,i.default)(s)}`,`grouped${(0,i.default)(d)}${(0,i.default)(r)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,a.default)(u,f,t)})(S),z=t.useMemo(()=>({className:R.grouped,color:c,disabled:x,disableElevation:v,disableFocusRipple:y,disableRipple:w,fullWidth:C,size:B,variant:$}),[c,x,v,y,w,C,B,$,R.grouped]),I=(0,o.default)(s),O=I.length;return(0,h.jsx)(g,{as:m,role:"group",className:(0,r.default)(R.root,u),ref:n,ownerState:S,...j,children:(0,h.jsx)(p.default.Provider,{value:z,children:I.map((e,t)=>{let r,a;return(0,h.jsx)(b.default.Provider,{value:(r=0===t,a=t===O-1,r&&a?"":r?R.firstButton:a?R.lastButton:R.middleButton),children:e},t)})})})});e.s(["ButtonGroup",0,x],73225);var v=e.i(73641);let y=(0,v.default)((0,h.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");e.s(["default",0,y],15106);let w=(0,v.default)([(0,h.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,h.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn");e.s(["default",0,w],47631);let C=(0,v.default)((0,h.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut");e.s(["default",0,C],6722)},24474,90390,e=>{"use strict";e.i(30608);var t=e.i(66343),r=e.i(29238),a=e.i(34940),o=e.i(74095),i=e.i(80671),n=e.i(57752),l=e.i(84884),s=e.i(40189),d=e.i(90243),u=e.i(96943),c=e.i(97990),f=e.i(20500);function m(e){return(0,f.default)("MuiLinearProgress",e)}let p=(0,c.default)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);e.s(["default",0,p,"getLinearProgressUtilityClass",()=>m],90390);var b=e.i(40223);let h=i.keyframes`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,g="string"!=typeof h?i.css`
        animation: ${h} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,x=i.keyframes`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,v="string"!=typeof x?i.css`
        animation: ${x} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,y=i.keyframes`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,w="string"!=typeof y?i.css`
        animation: ${y} 3s infinite linear;
      `:null,C=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.5),k=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${(0,u.default)(r.color)}`],t[r.variant]]}})((0,l.default)(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{backgroundColor:C(e,t)}})),{props:({ownerState:e})=>"inherit"===e.color&&"buffer"!==e.variant,style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),B=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.dashed,t[`dashedColor${(0,u.default)(r.color)}`]]}})((0,l.default)(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>{let r=C(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`}}})]})),w||{animation:`${y} 3s infinite linear`}),$=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar1,t[`barColor${(0,u.default)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((0,l.default)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:"transform .4s linear"}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .4s linear"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:g||{animation:`${h} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),j=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar2,t[`barColor${(0,u.default)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((0,l.default)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"!==e.color,style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"===e.color,style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:C(e,t),transition:"transform .4s linear"}})),{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:v||{animation:`${x} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),S=t.forwardRef(function(e,t){let i=(0,d.useDefaultProps)({props:e,name:"MuiLinearProgress"}),{className:n,color:l="primary",value:s,valueBuffer:c,variant:f="indeterminate",...p}=i,h={...i,color:l,variant:f},g=(e=>{let{classes:t,variant:r,color:o}=e,i={root:["root",`color${(0,u.default)(o)}`,r],dashed:["dashed",`dashedColor${(0,u.default)(o)}`],bar1:["bar","bar1",`barColor${(0,u.default)(o)}`,("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==r&&`barColor${(0,u.default)(o)}`,"buffer"===r&&`color${(0,u.default)(o)}`,("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,a.default)(i,m,t)})(h),x=(0,o.useRtl)(),v={},y={},w={};if(("determinate"===f||"buffer"===f)&&void 0!==s){v["aria-valuenow"]=Math.round(s),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let e=s-100;x&&(e=-e),y.transform=`translateX(${e}%)`}if("buffer"===f&&void 0!==c){let e=(c||0)-100;x&&(e=-e),w.transform=`translateX(${e}%)`}return(0,b.jsxs)(k,{className:(0,r.default)(g.root,n),ownerState:h,role:"progressbar",...v,ref:t,...p,children:["buffer"===f?(0,b.jsx)(B,{className:g.dashed,ownerState:h}):null,(0,b.jsx)($,{className:g.bar1,ownerState:h,style:y}),"determinate"===f?null:(0,b.jsx)(j,{className:g.bar2,ownerState:h,style:w})]})});e.s(["LinearProgress",0,S],24474)},57989,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,o={bgBlack:function(){return z},bgBlue:function(){return P},bgCyan:function(){return W},bgGreen:function(){return O},bgMagenta:function(){return T},bgRed:function(){return I},bgWhite:function(){return M},bgYellow:function(){return L},black:function(){return v},blue:function(){return k},bold:function(){return f},cyan:function(){return j},dim:function(){return m},gray:function(){return R},green:function(){return w},hidden:function(){return g},inverse:function(){return h},italic:function(){return p},magenta:function(){return B},purple:function(){return $},red:function(){return y},reset:function(){return c},strikethrough:function(){return x},underline:function(){return b},white:function(){return S},yellow:function(){return C}};for(var i in o)Object.defineProperty(r,i,{enumerable:!0,get:o[i]});let{env:n,stdout:l}=(null==(a=globalThis)?void 0:a.process)??{},s=n&&!n.NO_COLOR&&(n.FORCE_COLOR||(null==l?void 0:l.isTTY)&&!n.CI&&"dumb"!==n.TERM),d=(e,t,r,a)=>{let o=e.substring(0,a)+r,i=e.substring(a+t.length),n=i.indexOf(t);return~n?o+d(i,t,r,n):o+i},u=(e,t,r=e)=>s?a=>{let o=""+a,i=o.indexOf(t,e.length);return~i?e+d(o,t,r,i)+t:e+o+t}:String,c=s?e=>`\x1b[0m${e}\x1b[0m`:String,f=u("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m"),m=u("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),p=u("\x1b[3m","\x1b[23m"),b=u("\x1b[4m","\x1b[24m"),h=u("\x1b[7m","\x1b[27m"),g=u("\x1b[8m","\x1b[28m"),x=u("\x1b[9m","\x1b[29m"),v=u("\x1b[30m","\x1b[39m"),y=u("\x1b[31m","\x1b[39m"),w=u("\x1b[32m","\x1b[39m"),C=u("\x1b[33m","\x1b[39m"),k=u("\x1b[34m","\x1b[39m"),B=u("\x1b[35m","\x1b[39m"),$=u("\x1b[38;2;173;127;168m","\x1b[39m"),j=u("\x1b[36m","\x1b[39m"),S=u("\x1b[37m","\x1b[39m"),R=u("\x1b[90m","\x1b[39m"),z=u("\x1b[40m","\x1b[49m"),I=u("\x1b[41m","\x1b[49m"),O=u("\x1b[42m","\x1b[49m"),L=u("\x1b[43m","\x1b[49m"),P=u("\x1b[44m","\x1b[49m"),T=u("\x1b[45m","\x1b[49m"),W=u("\x1b[46m","\x1b[49m"),M=u("\x1b[47m","\x1b[49m")},36924,e=>{"use strict";var t=e.i(40223),r=e.i(30232),a=e.i(97927),o=e.i(10861),i=e.i(40638),n=e.i(66343),l=e.i(22364),s=e.i(26412),d=e.i(69881),u=e.i(73225),c=e.i(65286),f=e.i(35607),m=e.i(33144),p=e.i(24474),b=e.i(43326),h=e.i(42097),g=e.i(32569),x=e.i(90390),x=x,v=e.i(15106),y=e.i(47631),w=e.i(6722),C=e.i(80203),k=e.i(29227),B=e.i(47069),$=e.i(9544);e.i(46643);var j=e.i(43966),S=e.i(68120);let R=[{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1}];function z(e,t){let r="white"===t?1:2,a="white"===t?2:1,o=[];for(let t=0;t<8;t++)for(let l=0;l<8;l++){if(0!==e[8*t+l])continue;let s=0;for(let o of R){var i,n;let d=0,u=l+o.dx,c=t+o.dy;for(;i=u,n=c,i>=0&&i<8&&n>=0&&n<8;){let t=8*c+u;if(e[t]===a)d++,u+=o.dx,c+=o.dy;else if(e[t]===r&&d>0){s+=d;break}else break}}s>0&&o.push({x:l,y:t,score:s})}o.sort((e,t)=>t.score-e.score);let l=o.map(({x:e,y:t})=>({x:e,y:t}));return l.length>0?l:null}let I=function(e){let a,o,i,l,s,u,c=(0,r.c)(24),{gameId:f,board:m,zoomLvl:p,canMove:b,playerColor:g}=e,{currentUser:x}=(0,n.useContext)(k.CurrentUserContext),{socket:v}=(0,n.useContext)(B.SocketContext),[y,w]=(0,n.useState)(null),[C,$]=(0,n.useState)(null),j=(0,n.useRef)();c[0]!==m||c[1]!==b||c[2]!==C||c[3]!==g?(a=()=>{if(m&&JSON.stringify(m)!==JSON.stringify(C)&&(j.current=m,$([...m])),m&&b&&g){let e=z(m,g);e&&w([...e])}},c[0]=m,c[1]=b,c[2]=C,c[3]=g,c[4]=a):a=c[4],c[5]!==m||c[6]!==b||c[7]!==g?(o=[m,b,g],c[5]=m,c[6]=b,c[7]=g,c[8]=o):o=c[8],(0,n.useEffect)(a,o),c[9]!==y||c[10]!==b||c[11]!==x||c[12]!==f||c[13]!==v?(i=(e,t)=>{v&&b&&0===t&&y&&y.findIndex(t=>t.x===parseInt(e.x)&&t.y===parseInt(e.y))>-1&&v.emit("update game",{name:"reversi",gameId:f,login:x.login,token:x.token,move:{x:parseInt(e.x),y:parseInt(e.y)}})},c[9]=y,c[10]=b,c[11]=x,c[12]=f,c[13]=v,c[14]=i):i=c[14];let S=i;c[15]===Symbol.for("react.memo_cache_sentinel")?(l={p:1,textAlign:"center",width:"100%"},c[15]=l):l=c[15];let R=`reversi-board ${p<100?" reversi-board__"+p:""}`;return c[16]!==y||c[17]!==b||c[18]!==C||c[19]!==S?(s=C&&C.map((e,r)=>{let a=Math.floor(r/8),o=r%8;return(0,t.jsx)("div",{className:"reversi-board-cell","data-x":o,"data-y":a,onClick:t=>S(t.target.dataset,e),children:1===e||2===e?(0,t.jsxs)("div",{className:`reversi-chip${2===e?" flipped":""}`,children:[(0,t.jsx)("div",{className:"reversi-chip-front"}),(0,t.jsx)("div",{className:"reversi-chip-back"})]}):b&&y&&y.findIndex(e=>e.x===o&&e.y===a)>-1?(0,t.jsx)("div",{className:"reversi-move"}):""},r)}),c[16]=y,c[17]=b,c[18]=C,c[19]=S,c[20]=s):s=c[20],c[21]!==R||c[22]!==s?(u=(0,t.jsx)(d.Box,{sx:l,children:(0,t.jsx)(h.Stack,{direction:"column",alignItems:"center",children:(0,t.jsx)("div",{className:R,children:s})})}),c[21]=R,c[22]=s,c[23]=u):u=c[23],u};e.i(57989);var O=e.i(95211);let L=(0,i.createTheme)({colorSchemes:{dark:!0}});function P(){(0,a.useRouter)();let{currentUser:e,setCurrentUser:r}=(0,n.useContext)(k.CurrentUserContext),{socket:i}=(0,n.useContext)(B.SocketContext),[S,R]=(0,n.useState)(75),P=e=>{"zoomOut"===e&&(100===S&&R(75),75===S&&R(50)),"zoomIn"===e&&(50===S&&R(75),75===S&&R(100))},T=(0,a.useSearchParams)().get("id"),[W,M]=(0,n.useState)(!1),[_,F]=(0,n.useState)(!0),[N,E]=(0,n.useState)(!1),[A,G]=(0,n.useState)({}),[q,D]=(0,n.useState)(null),[H,V]=(0,n.useState)({white:2,black:2}),[U,J]=(0,n.useState)(!1),[K,X]=n.default.useState(!1),Y=(e,t)=>{"clickaway"!==t&&X(!1)},Z=q&&"white"===q?"black":"white",Q=A.players?.black==="Computer";return((0,n.useEffect)(()=>{i&&i.emit("list of games",{})},[]),(0,n.useEffect)(()=>{A.players&&e.login&&(A.players.white===e.login?D("white"):A.players.black===e.login&&D("black"))},[A,e]),(0,n.useEffect)(()=>{if(Q&&q&&A.moves?.current_move==="black"){let t=z(A.moves.board,"black");i&&t&&setTimeout(()=>{i.emit("update game",{name:"reversi",gameId:T,login:e.login,token:e.token,move:{x:parseInt(t[0].x),y:parseInt(t[0].y)}})},1e3)}},[A]),(0,n.useEffect)(()=>{let e=e=>{if(T in e){let t=e[T];t.moves.board=function(e){let t=Array(64).fill(0);for(let r=0;r<e.length;r++){let a=e.charCodeAt(r)-32;for(let e=0;e<4&&4*r+e<64;e++)t[4*r+e]=a>>2*e&3}return t}(t.moves.board),G(t),V({white:t.moves?.board.filter(e=>1===e).length||0,black:t.moves?.board.filter(e=>2===e).length||0}),N&&E(!1),_&&F(!1),"finished"!==e[T].status||U||(J(!0),X(!0))}else W?_||F(!0):N||E(!0)};return i.on("list of games",e),()=>{i.off("list of games",e)}},[i,T,W,N,_]),N)?(0,t.jsx)(O.default,{}):(0,t.jsxs)(o.ThemeProvider,{theme:L,defaultMode:"dark",noSsr:!0,children:[(0,t.jsx)(s.Backdrop,{sx:e=>({color:"#fff",zIndex:e.zIndex.drawer+1}),open:_,children:(0,t.jsx)(f.CircularProgress,{disableShrink:!0,color:"inherit"})}),(0,t.jsx)(d.Box,{sx:{width:"100%"},children:(0,t.jsx)($.default,{type:"game",gameId:T,gameInfo:A,handleSetIsUserLeftGame:e=>{M(!0),W!==e&&M(e)}})}),(!e.login||!q)&&!_&&(0,t.jsx)(d.Box,{sx:{width:"100%"},children:(0,t.jsx)(l.Alert,{severity:"info",sx:{m:1},variant:"outlined",icon:(0,t.jsx)(C.default,{fontSize:"inherit"}),children:(0,j.default)("spectatorMode",e.language)})}),(0,t.jsxs)(h.Stack,{spacing:1,direction:"row",sx:{p:2,pb:0},children:[(0,t.jsx)(d.Box,{sx:{width:"50%"},children:(0,t.jsxs)(h.Stack,{direction:"row",spacing:0,sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)(g.Typography,{variant:"body1",sx:{fontWeight:"bold"},noWrap:!0,children:"white"!==q&&q?"black"===q?A.players?.black:"finished"===A.status?(0,t.jsx)(c.Chip,{label:(0,j.default)("opponentLeftTheGame",e.language),size:"small",variant:"outlined",component:"span",sx:{fontFamily:"Roboto Condensed",fontWeight:"normal"}}):A.players?.white||"":A.players?.white}),(0,t.jsxs)(h.Stack,{direction:"row",alignItems:"center",children:[(0,t.jsx)(v.default,{sx:{transform:"rotate(180deg)"},color:("white"!==q||A?.moves?.current_move!=="white")&&("black"!==q||A?.moves?.current_move!=="black")&&(q||A?.moves?.current_move!=="white")?"disabled":"inherit"}),(0,t.jsx)(c.Chip,{sx:{width:"3em",fontWeight:"bold",backgroundColor:"black"===q?"black":"#eee",color:"black"===q?"#eee":"black",border:"1px solid #898989"},variant:"outlined",size:"small",label:"black"===q?H?.black:H?.white})]})]})}),(0,t.jsx)(d.Box,{sx:{width:"50%",textAlign:"right"},children:(0,t.jsxs)(h.Stack,{direction:"row",spacing:0,sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(h.Stack,{direction:"row",alignItems:"center",children:[(0,t.jsx)(c.Chip,{sx:{width:"3em",fontWeight:"bold",backgroundColor:"black"===q?"white":"#111",color:"black"===q?"#111":"white",border:"1px solid #898989"},variant:"outlined",size:"small",label:"white"!==q&&q?H?.white:H?.black}),(0,t.jsx)(v.default,{color:("white"!==q||A?.moves?.current_move!=="black")&&("black"!==q||A?.moves?.current_move!=="white")&&(q||A?.moves?.current_move!=="black")?"disabled":"inherit"})]}),(0,t.jsxs)(g.Typography,{variant:"body1",sx:{fontWeight:"bold"},noWrap:!0,children:["black"===q?A.players?.white?A.players.white:"finished"===A.status?"":(0,t.jsx)(c.Chip,{label:(0,j.default)("waitingForOpponent",e.language),size:"small",variant:"outlined",component:"span",sx:{fontWeight:"normal",fontFamily:"Roboto Condensed"}}):A.players?.black?"Computer"===A.players.black?(0,t.jsx)(t.Fragment,{children:(0,j.default)("computer",e.language)}):A.players.black:"finished"===A.status?"":(0,t.jsx)(c.Chip,{label:(0,j.default)("waitingForOpponent",e.language),size:"small",variant:"outlined",component:"span",sx:{fontWeight:"normal",fontFamily:"Roboto Condensed"}}),"finished"!==A.status&&("white"===q&&A?.moves?.current_move==="black"||"black"===q&&A?.moves?.current_move==="white")?"":"finished"===A.status?("white"!==q||A.players.black)&&("black"!==q||A.players.white)&&(q||A.players.black)?"":(0,t.jsx)(c.Chip,{label:(0,j.default)("opponentLeftTheGame",e.language),size:"small",variant:"outlined",component:"span",sx:{fontFamily:"Roboto Condensed",fontWeight:"normal"}}):""]})]})})]}),(0,t.jsx)(d.Box,{sx:{width:"100%",p:2,pb:0,pt:1},children:(0,t.jsx)(p.LinearProgress,{variant:"determinate",value:100*H.white/(H.white+H.black),sx:{[`&.${x.default.colorPrimary}`]:{backgroundColor:"white"===q?"gray":"black"===q?"white":"gray"},[`& .${x.default.bar}`]:{backgroundColor:"white"===q?"white":"black"===q?"gray":"white"}}})}),(0,t.jsx)(d.Box,{sx:{p:2,pt:1,pb:0,textAlign:"center",width:"100%",justifyContent:"center"},children:(0,t.jsxs)(h.Stack,{direction:"row",spacing:2,justifyContent:"space-between",children:[(0,t.jsx)(d.Box,{sx:{alignItems:"center",alignContent:"center"},children:(0,t.jsxs)(g.Typography,{variant:"body2",sx:{color:"rgb(186, 186, 186)",fontFamily:"Roboto Condensed"},noWrap:!0,children:[q&&A?.status!=="finished"&&("white"===q&&A?.moves?.current_move==="white"||"black"===q&&A?.moves?.current_move==="black")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("yourTurn",e.language)}):"",q&&A?.status==="finished"&&A?.result.toLowerCase().startsWith(q?.toLowerCase())?(0,t.jsx)(t.Fragment,{children:(0,j.default)("youWin",e.language)}):A?.result?.toLowerCase().startsWith("draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("draw",e.language)}):"",q&&"finished"!==A.status&&("white"===q&&A?.moves?.current_move==="black"||"black"===q&&A?.moves?.current_move==="white")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("waitingForOpponent",e.language)}):("finished"===A.status&&("white"!==q||A.players.black)&&("black"!==q||A.players.white),""),q&&A?.status==="finished"&&A?.result.toLowerCase().startsWith(Z?.toLowerCase()||"draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("opponentWins",e.language)}):""]})}),(0,t.jsx)(d.Box,{children:(0,t.jsxs)(u.ButtonGroup,{variant:"outlined","aria-label":"Basic button group",size:"small",children:[(0,t.jsx)(m.IconButton,{disabled:50===S,onClick:e=>P("zoomOut"),children:(0,t.jsx)(w.default,{})}),(0,t.jsx)(m.IconButton,{disabled:100===S,onClick:e=>P("zoomIn"),children:(0,t.jsx)(y.default,{})})]})})]})}),(0,t.jsx)(d.Box,{sx:{flexGrow:1,display:"flex",justifyContent:"center",m:"5px 0"},children:(0,t.jsx)(I,{gameId:T,board:A?.moves?.board,zoomLvl:S,canMove:A?.moves?.current_move===q&&A?.status==="ongoing",playerColor:q,isGameOver:U})}),q&&(0,t.jsx)(b.Snackbar,{open:K,autoHideDuration:6e3,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,t.jsx)(l.Alert,{onClose:Y,severity:"info",variant:"filled",sx:{width:"100%"},children:q&&A?.status==="finished"&&A?.result?.toLowerCase().startsWith(q?.toLowerCase())?(0,t.jsx)(t.Fragment,{children:(0,j.default)("youWin",e.language)}):A?.result?.toLowerCase().startsWith("draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("draw",e.language)}):(0,t.jsx)(t.Fragment,{children:(0,j.default)("opponentWins",e.language)})})})]})}e.s(["default",0,function(e){let a,o,i=(0,r.c)(3),{children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(S.default,{}),i[0]=a):a=i[0],i[1]!==l?(o=(0,t.jsx)(n.Suspense,{fallback:a,children:(0,t.jsx)(P,{children:l})}),i[1]=l,i[2]=o):o=i[2],o}],36924)}]);