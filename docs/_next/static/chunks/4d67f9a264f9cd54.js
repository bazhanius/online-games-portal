(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70915,e=>{"use strict";var t=e.i(71645);function r(e){return t.Children.toArray(e).filter(e=>t.isValidElement(e))}e.s(["default",()=>r])},8979,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let a=(0,t.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");e.s(["default",0,a])},80646,4052,8187,52835,80132,97579,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),a=e.i(19130);let o=t.createContext();var i=e.i(40799),n=e.i(75149),l=e.i(94425),s=e.i(40672),d=e.i(19727);function u(e){return(0,d.default)("MuiTable",e)}(0,s.default)("MuiTable",["root","stickyHeader"]);var c=e.i(43476);let p=(0,i.styled)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})((0,n.default)(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),f="table",m=t.forwardRef(function(e,i){let n=(0,l.useDefaultProps)({props:e,name:"MuiTable"}),{className:s,component:d=f,padding:m="normal",size:g="medium",stickyHeader:b=!1,...h}=n,y={...n,component:d,padding:m,size:g,stickyHeader:b},x=(e=>{let{classes:t,stickyHeader:r}=e;return(0,a.default)({root:["root",r&&"stickyHeader"]},u,t)})(y),v=t.useMemo(()=>({padding:m,size:g,stickyHeader:b}),[m,g,b]);return(0,c.jsx)(o.Provider,{value:v,children:(0,c.jsx)(p,{as:d,role:d===f?null:"table",ref:i,className:(0,r.default)(x.root,s),ownerState:y,...h})})});e.s(["Table",0,m],80646);let g=t.createContext();function b(e){return(0,d.default)("MuiTableBody",e)}e.s(["default",0,g],4052),(0,s.default)("MuiTableBody",["root"]);let h=(0,i.styled)("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),y={variant:"body"},x="tbody",v=t.forwardRef(function(e,t){let o=(0,l.useDefaultProps)({props:e,name:"MuiTableBody"}),{className:i,component:n=x,...s}=o,d={...o,component:n},u=(e=>{let{classes:t}=e;return(0,a.default)({root:["root"]},b,t)})(d);return(0,c.jsx)(g.Provider,{value:y,children:(0,c.jsx)(h,{className:(0,r.default)(u.root,i),as:n,ref:t,role:n===x?null:"rowgroup",ownerState:d,...s})})});function w(e){return(0,d.default)("MuiTableRow",e)}e.s(["TableBody",0,v],8187);let k=(0,s.default)("MuiTableRow",["root","selected","hover","head","footer"]),C=(0,i.styled)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((0,n.default)(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${k.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${k.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),j=t.forwardRef(function(e,o){let i=(0,l.useDefaultProps)({props:e,name:"MuiTableRow"}),{className:n,component:s="tr",hover:d=!1,selected:u=!1,...p}=i,f=t.useContext(g),m={...i,component:s,hover:d,selected:u,head:f&&"head"===f.variant,footer:f&&"footer"===f.variant},b=(e=>{let{classes:t,selected:r,hover:o,head:i,footer:n}=e;return(0,a.default)({root:["root",r&&"selected",o&&"hover",i&&"head",n&&"footer"]},w,t)})(m);return(0,c.jsx)(C,{as:s,ref:o,className:(0,r.default)(b.root,n),role:"tr"===s?null:"row",ownerState:m,...p})});e.s(["TableRow",0,j],52835);var S=e.i(42196);function $(e){return(0,d.default)("MuiTableCell",e)}let T=(0,s.default)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),M=(0,i.styled)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,S.default)(r.size)}`],"normal"!==r.padding&&t[`padding${(0,S.default)(r.padding)}`],"inherit"!==r.align&&t[`align${(0,S.default)(r.align)}`],r.stickyHeader&&t.stickyHeader]}})((0,n.default)(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?e.lighten(e.alpha(e.palette.divider,1),.88):e.darken(e.alpha(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${T.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),R=t.forwardRef(function(e,i){let n,s=(0,l.useDefaultProps)({props:e,name:"MuiTableCell"}),{align:d="inherit",className:u,component:p,padding:f,scope:m,size:b,sortDirection:h,variant:y,...x}=s,v=t.useContext(o),w=t.useContext(g),k=w&&"head"===w.variant,C=m;"td"===(n=p||(k?"th":"td"))?C=void 0:!C&&k&&(C="col");let j=y||w&&w.variant,T={...s,align:d,component:n,padding:f||(v&&v.padding?v.padding:"normal"),size:b||(v&&v.size?v.size:"medium"),sortDirection:h,stickyHeader:"head"===j&&v&&v.stickyHeader,variant:j},R=(e=>{let{classes:t,variant:r,align:o,padding:i,size:n,stickyHeader:l}=e,s={root:["root",r,l&&"stickyHeader","inherit"!==o&&`align${(0,S.default)(o)}`,"normal"!==i&&`padding${(0,S.default)(i)}`,`size${(0,S.default)(n)}`]};return(0,a.default)(s,$,t)})(T),I=null;return h&&(I="asc"===h?"ascending":"descending"),(0,c.jsx)(M,{as:n,ref:i,className:(0,r.default)(R.root,u),"aria-sort":I,scope:C,ownerState:T,...x})});function I(e){return(0,d.default)("MuiTableContainer",e)}e.s(["TableCell",0,R],80132),(0,s.default)("MuiTableContainer",["root"]);let z=(0,i.styled)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),B=t.forwardRef(function(e,t){let o=(0,l.useDefaultProps)({props:e,name:"MuiTableContainer"}),{className:i,component:n="div",...s}=o,d={...o,component:n},u=(e=>{let{classes:t}=e;return(0,a.default)({root:["root"]},I,t)})(d);return(0,c.jsx)(z,{ref:t,as:n,className:(0,r.default)(u.root,i),ownerState:d,...s})});e.s(["TableContainer",0,B],97579)},32963,e=>{"use strict";var t=e.i(67719);e.s(["Paper",()=>t.default])},16362,e=>{"use strict";let t=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function r(e,t=null,a=null){let o={opponentFound:"Соперник найден",test:"Всё в порядке!"},i={chess:"Шахматы",battleship:"Морской бой",reversi:"Реверси",connect4:"Четыре в ряд",connect5:"Крестики-нолики (5 в ряд)",nardy:"Длинные нарды"};"Notification"in window&&o&&("granted"===Notification.permission?new Notification(o[e],{badge:`${window.location.origin}/online-games-portal/img/lan-games-logo-badge.png`,icon:"test"===e?`${window.location.origin}/online-games-portal/img/LAN-chess.png`:`${window.location.origin}/online-games-portal/img/LAN-${t}.png`,body:"test"===e?"Так будут приходить уведомления":`${a} подключился к игре ${i[t]}`}):"denied"!==Notification.permission&&Notification.requestPermission().then(r=>{"granted"===r&&new Notification(o[e],{badge:`${window.location.origin}/online-games-portal/img/lan-games-logo-badge.png`,icon:"test"===e?`${window.location.origin}/online-games-portal/img/LAN-chess.png`:`${window.location.origin}/online-games-portal/img/LAN-${t}.png`,body:"test"===e?"Так будут приходить уведомления":`${a} подключился к игре ${i[t]}`})}))}e.s(["getRandomInt",()=>t,"notifyMe",()=>r])},57546,45077,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),a=e.i(19130),o=e.i(68308),i=e.i(84364),n=e.i(40799),l=e.i(75149),s=e.i(35057),d=e.i(94425),u=e.i(42196),c=e.i(40672),p=e.i(19727);function f(e){return(0,p.default)("MuiLinearProgress",e)}let m=(0,c.default)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);e.s(["default",0,m,"getLinearProgressUtilityClass",()=>f],45077);var g=e.i(43476);let b=i.keyframes`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,h="string"!=typeof b?i.css`
        animation: ${b} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,y=i.keyframes`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,x="string"!=typeof y?i.css`
        animation: ${y} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,v=i.keyframes`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,w="string"!=typeof v?i.css`
        animation: ${v} 3s infinite linear;
      `:null,k=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.5),C=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${(0,u.default)(r.color)}`],t[r.variant]]}})((0,l.default)(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{backgroundColor:k(e,t)}})),{props:({ownerState:e})=>"inherit"===e.color&&"buffer"!==e.variant,style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),j=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.dashed,t[`dashedColor${(0,u.default)(r.color)}`]]}})((0,l.default)(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>{let r=k(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`}}})]})),w||{animation:`${v} 3s infinite linear`}),S=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar1,t[`barColor${(0,u.default)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((0,l.default)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:"transform .4s linear"}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .4s linear"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:h||{animation:`${b} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),$=(0,n.styled)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar2,t[`barColor${(0,u.default)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((0,l.default)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"!==e.color,style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"===e.color,style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter((0,s.default)()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:k(e,t),transition:"transform .4s linear"}})),{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:x||{animation:`${y} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),T=t.forwardRef(function(e,t){let i=(0,d.useDefaultProps)({props:e,name:"MuiLinearProgress"}),{className:n,color:l="primary",value:s,valueBuffer:c,variant:p="indeterminate",...m}=i,b={...i,color:l,variant:p},h=(e=>{let{classes:t,variant:r,color:o}=e,i={root:["root",`color${(0,u.default)(o)}`,r],dashed:["dashed",`dashedColor${(0,u.default)(o)}`],bar1:["bar","bar1",`barColor${(0,u.default)(o)}`,("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==r&&`barColor${(0,u.default)(o)}`,"buffer"===r&&`color${(0,u.default)(o)}`,("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,a.default)(i,f,t)})(b),y=(0,o.useRtl)(),x={},v={},w={};if(("determinate"===p||"buffer"===p)&&void 0!==s){x["aria-valuenow"]=Math.round(s),x["aria-valuemin"]=0,x["aria-valuemax"]=100;let e=s-100;y&&(e=-e),v.transform=`translateX(${e}%)`}if("buffer"===p&&void 0!==c){let e=(c||0)-100;y&&(e=-e),w.transform=`translateX(${e}%)`}return(0,g.jsxs)(C,{className:(0,r.default)(h.root,n),ownerState:b,role:"progressbar",...x,ref:t,...m,children:["buffer"===p?(0,g.jsx)(j,{className:h.dashed,ownerState:b}):null,(0,g.jsx)(S,{className:h.bar1,ownerState:b,style:v}),"determinate"===p?null:(0,g.jsx)($,{className:h.bar2,ownerState:b,style:w})]})});e.s(["LinearProgress",0,T],57546)},50843,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(18566),o=e.i(71645),i=e.i(3974),n=e.i(13854),l=e.i(76552),s=e.i(69073),d=e.i(97555),u=e.i(37828),c=e.i(69120),p=e.i(57546),f=e.i(23411),m=e.i(63745),g=e.i(66796),b=e.i(45077),b=b,h=e.i(56105),y=e.i(59722),x=e.i(12872),v=e.i(8979),w=e.i(83270),k=e.i(88830),C=e.i(18452);e.i(87812);var j=e.i(70607),S=e.i(92863);let $=[{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1}];function T(e,t,r="easy"){let a="white"===t?1:2,o="white"===t?2:1,i=[];for(let t=0;t<8;t++)for(let s=0;s<8;s++){if(0!==e[8*t+s])continue;let d=0;for(let r of $){var n,l;let i=0,u=s+r.dx,c=t+r.dy;for(;n=u,l=c,n>=0&&n<8&&l>=0&&l<8;){let t=8*c+u;if(e[t]===o)i++,u+=r.dx,c+=r.dy;else if(e[t]===a&&i>0){d+=i;break}else break}}d>0&&("medium"===r&&(0===s&&0===t||0===s&&7===t||7===s&&0===t||7===s&&7===t)&&(d+=100),i.push({x:s,y:t,score:d}))}i.sort((e,t)=>t.score-e.score);let s=i.map(({x:e,y:t})=>({x:e,y:t}));return s.length>0?s:null}let M=function(e){let a,i,n,s,d,u,c=(0,r.c)(24),{gameId:p,board:f,zoomLvl:g,canMove:b,playerColor:h}=e,{currentUser:y}=(0,o.useContext)(w.CurrentUserContext),{socket:x}=(0,o.useContext)(k.SocketContext),[v,C]=(0,o.useState)(null),[j,S]=(0,o.useState)(null),$=(0,o.useRef)();c[0]!==f||c[1]!==b||c[2]!==j||c[3]!==h?(a=()=>{if(f&&JSON.stringify(f)!==JSON.stringify(j)&&($.current=f,S([...f])),f&&b&&h){let e=T(f,h);e&&C([...e])}},c[0]=f,c[1]=b,c[2]=j,c[3]=h,c[4]=a):a=c[4],c[5]!==f||c[6]!==b||c[7]!==h?(i=[f,b,h],c[5]=f,c[6]=b,c[7]=h,c[8]=i):i=c[8],(0,o.useEffect)(a,i),c[9]!==v||c[10]!==b||c[11]!==y||c[12]!==p||c[13]!==x?(n=(e,t)=>{x&&b&&0===t&&v&&v.findIndex(t=>t.x===parseInt(e.x)&&t.y===parseInt(e.y))>-1&&x.emit("update game",{name:"reversi",gameId:p,login:y.login,token:y.token,move:{x:parseInt(e.x),y:parseInt(e.y)}})},c[9]=v,c[10]=b,c[11]=y,c[12]=p,c[13]=x,c[14]=n):n=c[14];let M=n;c[15]===Symbol.for("react.memo_cache_sentinel")?(s={p:1,textAlign:"center",width:"100%"},c[15]=s):s=c[15];let R=`reversi-board ${g<100?" reversi-board__"+g:""}`;return c[16]!==v||c[17]!==b||c[18]!==j||c[19]!==M?(d=j&&j.map((e,r)=>{let a=Math.floor(r/8),o=r%8;return(0,t.jsx)("div",{className:"reversi-board-cell","data-x":o,"data-y":a,onClick:t=>M(t.target.dataset,e),children:1===e||2===e?(0,t.jsxs)("div",{className:`reversi-chip${2===e?" flipped":""}`,children:[(0,t.jsx)("div",{className:"reversi-chip-front"}),(0,t.jsx)("div",{className:"reversi-chip-back"})]}):b&&v&&v.findIndex(e=>e.x===o&&e.y===a)>-1?(0,t.jsx)("div",{className:"reversi-move"}):""},r)}),c[16]=v,c[17]=b,c[18]=j,c[19]=M,c[20]=d):d=c[20],c[21]!==R||c[22]!==d?(u=(0,t.jsx)(l.Box,{sx:s,children:(0,t.jsx)(m.Stack,{direction:"column",alignItems:"center",children:(0,t.jsx)("div",{className:R,children:d})})}),c[21]=R,c[22]=d,c[23]=u):u=c[23],u};var R=e.i(45),I=e.i(16362);function z(){(0,a.useRouter)();let{currentUser:e,setCurrentUser:r}=(0,o.useContext)(w.CurrentUserContext),{socket:S}=(0,o.useContext)(k.SocketContext),[$,z]=(0,o.useState)(75),B=e=>{"zoomOut"===e&&(100===$&&z(75),75===$&&z(50)),"zoomIn"===e&&(50===$&&z(75),75===$&&z(100))},P=(0,a.useSearchParams)().get("id"),[L,N]=(0,o.useState)(!1),[A,W]=(0,o.useState)(!0),[O,F]=(0,o.useState)(!1),[_,H]=(0,o.useState)({}),[D,q]=(0,o.useState)(null),[E,G]=(0,o.useState)({white:2,black:2}),[U,J]=(0,o.useState)(!1),[X,K]=o.default.useState(!1),V=(e,t)=>{"clickaway"!==t&&K(!1)},Q=D&&"white"===D?"black":"white",Y=_.players?.black==="Computer";return((0,o.useEffect)(()=>{S&&S.emit("list of games",{})},[]),(0,o.useEffect)(()=>{_.players&&e.login&&(_.players.white===e.login?q("white"):_.players.black===e.login&&q("black"))},[_,e]),(0,o.useEffect)(()=>{if(Y&&D&&_.moves?.current_move==="black"){let t=T(_.moves.board,"black",e?.computerStrength?.reversi===0?"easy":"medium");S&&t&&setTimeout(()=>{S.emit("update game",{name:"reversi",gameId:P,login:e.login,token:e.token,move:{x:parseInt(t[0].x),y:parseInt(t[0].y)}})},1e3)}},[_]),(0,o.useEffect)(()=>{let e=e=>{if(P in e){let t=e[P];t.moves.board=function(e){let t=Array(64).fill(0);for(let r=0;r<e.length;r++){let a=e.charCodeAt(r)-32;for(let e=0;e<4&&4*r+e<64;e++)t[4*r+e]=a>>2*e&3}return t}(t.moves.board),_?.status==="starting"&&t?.status==="ongoing"&&(0,I.notifyMe)("opponentFound",t.name,t.players["black"===D?"white":"black"]),H(t),G({white:t.moves?.board.filter(e=>1===e).length||0,black:t.moves?.board.filter(e=>2===e).length||0}),O&&F(!1),A&&W(!1),"finished"!==e[P].status||U||(J(!0),K(!0))}else L?A||W(!0):O||F(!0)};return S.on("list of games",e),()=>{S.off("list of games",e)}},[S,P,L,O,A]),O)?(0,t.jsx)(R.default,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Backdrop,{sx:e=>({color:"#fff",zIndex:e.zIndex.drawer+1}),open:A,children:(0,t.jsx)(u.CircularProgress,{disableShrink:!0,color:"inherit"})}),(0,t.jsx)(l.Box,{sx:{width:"100%"},children:(0,t.jsx)(C.default,{type:"game",gameId:P,gameInfo:_,handleSetIsUserLeftGame:e=>{N(!0),L!==e&&N(e)}})}),(!e.login||!D)&&!A&&(0,t.jsx)(l.Box,{sx:{width:"100%"},children:(0,t.jsx)(i.Alert,{severity:"info",sx:{m:1},variant:"outlined",icon:(0,t.jsx)(v.default,{fontSize:"inherit"}),children:(0,j.default)("spectatorMode",e.language)})}),(0,t.jsxs)(m.Stack,{spacing:1,direction:"row",sx:{p:2,pb:0},children:[(0,t.jsx)(l.Box,{sx:{width:"50%"},children:(0,t.jsxs)(m.Stack,{direction:"row",spacing:0,sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)(g.Typography,{variant:"body1",sx:{fontWeight:"bold"},noWrap:!0,children:"white"!==D&&D?"black"===D?_.players?.black:"finished"===_.status?(0,t.jsx)(d.Chip,{label:(0,j.default)("opponentLeftTheGame",e.language),size:"small",variant:"outlined",component:"span",sx:{fontFamily:"Roboto Condensed",fontWeight:"normal"}}):_.players?.white||"":_.players?.white}),(0,t.jsxs)(m.Stack,{direction:"row",alignItems:"center",children:[(0,t.jsx)(h.default,{sx:{transform:"rotate(180deg)"},color:("white"!==D||_?.moves?.current_move!=="white")&&("black"!==D||_?.moves?.current_move!=="black")&&(D||_?.moves?.current_move!=="white")?"disabled":"inherit"}),(0,t.jsx)(d.Chip,{sx:{width:"3em",fontWeight:"bold",backgroundColor:"black"===D?"black":"#eee",color:"black"===D?"#eee":"black",border:"1px solid #898989"},variant:"outlined",size:"small",label:"black"===D?E?.black:E?.white})]})]})}),(0,t.jsx)(l.Box,{sx:{width:"50%",textAlign:"right"},children:(0,t.jsxs)(m.Stack,{direction:"row",spacing:0,sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(m.Stack,{direction:"row",alignItems:"center",children:[(0,t.jsx)(d.Chip,{sx:{width:"3em",fontWeight:"bold",backgroundColor:"black"===D?"white":"#111",color:"black"===D?"#111":"white",border:"1px solid #898989"},variant:"outlined",size:"small",label:"white"!==D&&D?E?.white:E?.black}),(0,t.jsx)(h.default,{color:("white"!==D||_?.moves?.current_move!=="black")&&("black"!==D||_?.moves?.current_move!=="white")&&(D||_?.moves?.current_move!=="black")?"disabled":"inherit"})]}),(0,t.jsxs)(g.Typography,{variant:"body1",sx:{fontWeight:"bold"},noWrap:!0,children:["black"===D?_.players?.white?_.players.white:"finished"===_.status?"":(0,t.jsx)(d.Chip,{label:(0,j.default)("waitingForOpponent",e.language),size:"small",variant:"outlined",component:"span",sx:{fontWeight:"normal",fontFamily:"Roboto Condensed"}}):_.players?.black?"Computer"===_.players.black?(0,t.jsx)(t.Fragment,{children:(0,j.default)("computer",e.language)}):_.players.black:"finished"===_.status?"":(0,t.jsx)(d.Chip,{label:(0,j.default)("waitingForOpponent",e.language),size:"small",variant:"outlined",component:"span",sx:{fontWeight:"normal",fontFamily:"Roboto Condensed"}}),"finished"!==_.status&&("white"===D&&_?.moves?.current_move==="black"||"black"===D&&_?.moves?.current_move==="white")?"":"finished"===_.status?("white"!==D||_.players.black)&&("black"!==D||_.players.white)&&(D||_.players.black)?"":(0,t.jsx)(d.Chip,{label:(0,j.default)("opponentLeftTheGame",e.language),size:"small",variant:"outlined",component:"span",sx:{fontFamily:"Roboto Condensed",fontWeight:"normal"}}):""]})]})})]}),(0,t.jsx)(l.Box,{sx:{width:"100%",p:2,pb:0,pt:1},children:(0,t.jsx)(p.LinearProgress,{variant:"determinate",value:100*E.white/(E.white+E.black),sx:{[`&.${b.default.colorPrimary}`]:{backgroundColor:"white"===D?"gray":"black"===D?"white":"gray"},[`& .${b.default.bar}`]:{backgroundColor:"white"===D?"white":"black"===D?"gray":"white"}}})}),(0,t.jsx)(l.Box,{sx:{p:2,pt:1,pb:0,textAlign:"center",width:"100%",justifyContent:"center"},children:(0,t.jsxs)(m.Stack,{direction:"row",spacing:2,justifyContent:"space-between",children:[(0,t.jsx)(l.Box,{sx:{alignItems:"center",alignContent:"center"},children:(0,t.jsxs)(g.Typography,{variant:"body2",sx:{color:"#8d8d8e",fontFamily:"Roboto Condensed"},noWrap:!0,children:[D&&_?.status!=="finished"&&("white"===D&&_?.moves?.current_move==="white"||"black"===D&&_?.moves?.current_move==="black")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("yourTurn",e.language)}):"",D&&_?.status==="finished"&&_?.result.toLowerCase().startsWith(D?.toLowerCase())?(0,t.jsx)(t.Fragment,{children:(0,j.default)("youWin",e.language)}):_?.result?.toLowerCase().startsWith("draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("draw",e.language)}):"",D&&"finished"!==_.status&&("white"===D&&_?.moves?.current_move==="black"||"black"===D&&_?.moves?.current_move==="white")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("waitingForOpponent",e.language)}):("finished"===_.status&&("white"!==D||_.players.black)&&("black"!==D||_.players.white),""),D&&_?.status==="finished"&&_?.result.toLowerCase().startsWith(Q?.toLowerCase()||"draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("opponentWins",e.language)}):""]})}),(0,t.jsx)(l.Box,{children:(0,t.jsxs)(s.ButtonGroup,{variant:"outlined","aria-label":"Basic button group",size:"small",children:[(0,t.jsx)(c.IconButton,{disabled:50===$,onClick:e=>B("zoomOut"),children:(0,t.jsx)(x.default,{})}),(0,t.jsx)(c.IconButton,{disabled:100===$,onClick:e=>B("zoomIn"),children:(0,t.jsx)(y.default,{})})]})})]})}),(0,t.jsx)(l.Box,{sx:{flexGrow:1,display:"flex",justifyContent:"center",m:"5px 0"},children:(0,t.jsx)(M,{gameId:P,board:_?.moves?.board,zoomLvl:$,canMove:_?.moves?.current_move===D&&_?.status==="ongoing",playerColor:D,isGameOver:U})}),D&&(0,t.jsx)(f.Snackbar,{open:X,autoHideDuration:6e3,onClose:V,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,t.jsx)(i.Alert,{onClose:V,severity:"info",variant:"filled",sx:{width:"100%"},children:D&&_?.status==="finished"&&_?.result?.toLowerCase().startsWith(D?.toLowerCase())?(0,t.jsx)(t.Fragment,{children:(0,j.default)("youWin",e.language)}):_?.result?.toLowerCase().startsWith("draw")?(0,t.jsx)(t.Fragment,{children:(0,j.default)("draw",e.language)}):(0,t.jsx)(t.Fragment,{children:(0,j.default)("opponentWins",e.language)})})})]})}e.s(["default",0,function(e){let a,i,n=(0,r.c)(3),{children:l}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(S.default,{}),n[0]=a):a=n[0],n[1]!==l?(i=(0,t.jsx)(o.Suspense,{fallback:a,children:(0,t.jsx)(z,{children:l})}),n[1]=l,n[2]=i):i=n[2],i}],50843)}]);